<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java," />










<meta name="description" content="spring Jar download spring的核心是控制反转(ioc)和面向切面(AOP) 1.jar包依赖: 1.1.核心jar包:beans,context,core,expression  1.2.依赖jar包:日志包com.springsource.org.apache.commons.logging,com.springsource.org.apache.log4j 2.编写sp">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="spring">
<meta property="og:url" content="http://yoursite.com/2019/03/13/spring/index.html">
<meta property="og:site_name" content="天行健 君子以自强不息">
<meta property="og:description" content="spring Jar download spring的核心是控制反转(ioc)和面向切面(AOP) 1.jar包依赖: 1.1.核心jar包:beans,context,core,expression  1.2.依赖jar包:日志包com.springsource.org.apache.commons.logging,com.springsource.org.apache.log4j 2.编写sp">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-07-22T10:38:45.195Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="spring">
<meta name="twitter:description" content="spring Jar download spring的核心是控制反转(ioc)和面向切面(AOP) 1.jar包依赖: 1.1.核心jar包:beans,context,core,expression  1.2.依赖jar包:日志包com.springsource.org.apache.commons.logging,com.springsource.org.apache.log4j 2.编写sp">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/13/spring/"/>





  <title>spring | 天行健 君子以自强不息</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">天行健 君子以自强不息</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-首页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-分类">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-标签">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-关于">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/13/spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="付晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天行健 君子以自强不息">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">spring</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-13T11:28:33+08:00">
                2019-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="http://repo.spring.io/release/org/springframework/spring" target="_blank" rel="noopener">spring Jar download</a></p>
<p>spring的核心是控制反转(ioc)和面向切面(AOP)</p>
<p>1.jar包依赖:</p>
<pre><code>1.1.核心jar包:beans,context,core,expression

1.2.依赖jar包:日志包com.springsource.org.apache.commons.logging,com.springsource.org.apache.log4j
</code></pre><p>2.编写spring配置文件:applicationContext.xml</p>
<pre><code>2.1.核心配置 
&lt;bean id=&quot;唯一id值&quot;
         class=&quot;具体实现类&quot; 
         name=”和id标签作用相同，但id值不能出现特殊字符,name可以。开发一般不用”
         scope=”singleton,prototype,request,session,globalsession“ 
         init-method=”当bean被载入容器的时候调用指定方法“ 
         destroy-method=&quot;当bean从容器删除的时候调用指定方法&quot;&gt;
         &lt;!--属性依赖注入--&gt;
         &lt;property name=&quot;需要注入的属性名称&quot; value=&quot;注入的属性值&quot;/&gt;
         &lt;property name=&quot;需要注入的属性名称&quot; ref=&quot;引用对象的id&quot;/&gt;
         &lt;!--构造函数依赖注入--&gt;
        &lt;constructor-arg name=&quot;属性名称&quot; value=&quot;属性值&quot;/&gt;
        &lt;constructor-arg name=&quot;属性名称&quot; ref=&quot;引用对象的id&quot;/&gt;
        &lt;constructor-arg index=&quot;构造参数索引从0开始&quot; value=&quot;属性值&quot;/&gt;
        &lt;constructor-arg index=&quot;构造参数索引从0开始&quot; ref=&quot;引用对象的id&quot;/&gt;
        &lt;!-- 集合注入List,Set,Map --&gt;
        &lt;property name=&quot;list&quot;&gt;
            &lt;list&gt;
                &lt;value&gt;属性值&lt;/value&gt;    
            &lt;/list&gt;
        &lt;/property&gt;
        &lt;property name=&quot;map&quot;&gt;
            &lt;map&gt;
                &lt;entry key=&quot;&quot; value=&quot;&quot;/&gt; 
            &lt;/map&gt;
        &lt;/property&gt;
        &lt;!--属性文件赋值--&gt;
        &lt;property name=&quot;pro&quot;&gt;
           &lt;props&gt;
            &lt;prop key=&quot;properties 属性名称&quot;&gt;properties 属性值&lt;/prop&gt;
            &lt;/props&gt;
        &lt;/property&gt;



&lt;/bean&gt;
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">属性:scope</span><br><span class="line">属性值:</span><br><span class="line">		singleto:单例,默认值</span><br><span class="line">		prototype:多例，在spring框架整合struts2框架的时候，Action类也需要交给spring做管理，需要把Action类配置成多例</span><br><span class="line">		request:应用在web项目中，每次http请求都会创建一个新的bean</span><br><span class="line">		session:应用在web项目中，同一个http session 共享一个bean</span><br><span class="line">		globalsessio:应用在web项目中，多服务器间的session</span><br></pre></td></tr></table></figure>
<p>3.spring整合web</p>
<pre><code>3.1.引入spring-web jar包，配置初始化监听器，设置文件加载路径

 &lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;
&lt;!-- 默认只能加载WEB-INF目录下的配置文件，提供配置方式，加载src目录下 --&gt;
&lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
&lt;/context-param&gt;

   3.2.获取ApplicationContext对象 
   WebApplicationContext c = WebApplicationContextUtils.getWebApplicationContext(ServletContext);
</code></pre><p>4.spring框架IOC注解方式</p>
<pre><code>4.1.引入spring-aop-4.2.4.RELEASE.jar
在applicationContext.xml配置文件中配置context约束，配置注解扫描
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;
         http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.springframework.org/schema/context
         http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
    &lt;!-- 开始注解扫描 --&gt;
    &lt;context:component-scan base-package=&quot;包名&quot;/&gt;
&lt;/beans&gt;
注解:@Component 组件，作用在类上(value=&quot;相当于xmlbean配置的id&quot;) 
spring提供@Component的三个衍生注解
@Controller 作用在web层
@Service     作用在业务层
@Repository 作用在持久层
属性注入的注解（使用注解注入的方式，可以不用提示set方法）
@value 用于注入普通类型
注入的是对象类型
            @Autowired:默认按类型进行自动装配
            @Qualifier:强制使用名称注入
@Resource 相当于@Autowired和@Qualifier一起使用
Bean作用范围注解
@Scope，作用在类上，值有singleton 单例默认值，prototype 多例
@PostConstruct 相当于init-method
@PreDestroy 相当于destroy-method
</code></pre><p>5.spring整合JUnit单元测试</p>
<pre><code>5.1.引入JUnit4jar包，引入spring-testjar包
在类上面增加注解
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)
最后注解获取属性进行测试
</code></pre><p>6.spring核心AOP(面向切面编程)</p>
<pre><code>6.1.底层采用的是代理技术，代理的方式提供了两种
1.基于JDK的动态代理：必须是面向接口的，只有实现了具体接口的类才能生成代理对象
2.基于CGLIB动态代理：对于没有实现了接口的类，也可以产生代理，产生这个类的子类的方式

6.2.AOP相关术语
Joinpoint:连接点，是指那些被拦截到的点。
Pointcut:切入点，是指我们要对那些Jointpoint进行拦截的定义
Advice:通知/增强，是指拦截到Joinpoint之后所要做的事情就是通知。通知分为：前置通知，后置通知，异常通知，最终通知，环绕通知（切面要完成的功能）
Introduction:引介，是一种特殊的通知在不修改类代码的前提下，Introduction可以在运行期为类动态地添加一些方法或Filed
Target:目标对象，代理的目标对象
Weaving:织入，是指把增强应用到目标对象来创建新的代理对象的过程
Proxy:代理，一个类被AOP织入增强后，就产生一个结果代理类
Aspect:切面，切入点和通知的结合

6.3.引入jar包：
spring-aop,
spring-aspects,
com.springsource.org.aopalliance,
com.springsource.org.aspectj.weaver

6.4.配置文件中配置约束
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;
         http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/aop
         http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
&lt;/beans&gt;
编写切面类Aspect，配置AOP
 &lt;aop:config proxy-target-class=&quot;true&quot;&gt;
    &lt;!--配置切面类:切入点+通知--&gt;
    &lt;aop:aspect ref=&quot;增加类引用&quot;&gt;
        &lt;aop:before method=&quot;log&quot; pointcut=&quot;execution(切入点表达式)&quot;/&gt;
    &lt;/aop:aspect&gt;
&lt;/aop:config&gt;
切入点表达式：
            1.execution()固定的必须写
            2.public修饰符可以省略
            3.返回值类型必须写(* 表示任意返回值)
            4.包名也必须写可以用*代替，简写方式：*..*表示任意包结构
            5.类名也必须写，可以用*号简写：*DaoImpl
            6.方法也必须写，可以用*号简写
            7.方法的参数:一个*表示一个参数，..表示任意的参数
通知类型：
            1.前置通知，在目标类方法执行之前执行。配置标签&lt;aop:after/&gt;
            2.最终通知，在目标类的方法执行之后执行，如果程序出现了异常，最终通知也会执行&lt;aop:after/&gt;
            3.后置通知，方法正常执行后的通知&lt;aop:after-returning/&gt;
            4.异常抛出通知，在跑出异常后的通知&lt;aop:after-throwing/&gt;
            5.环绕通知，方法的执行前后执行&lt;aop:around/&gt;注意目标的方法默认不执行，需要使用ProceedingJoinPoint对象来让目标对象的方法执行。
</code></pre><p>7.spring AOP 注解方式</p>
<pre><code>7.1.创建切面类，增加@Aspect注解，编写切面方法，增加通知注解，在配置文件中增加&lt;aop:aspectj-autoproxy/&gt;开启自动注解
通知注解:
        @Before前置通知
        @AfterReturing后置通知
        @After最终通知
        @Around环绕通知
        @AfterThrowing异常抛出通知
</code></pre><p>8.spring框架的JDBC模板技术</p>
<pre><code>8.1 spring提供了JDBC模板 JdbcTemplate类，简化持久层编程
spring框架可以整合Hibernate框架，提供了模板类HibernateTemplate

8.2 引入JDBC模板jar包:spring-jdbc,spring-tx
&lt;!--配置连接池 spring默认提供的连接池--&gt;
&lt;bean id=&quot;datasource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;
    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://192.168.2.224:3306/spring?serverTimezone=GMT&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;
&lt;!--配置jdbctemplate--&gt;
&lt;bean id=&quot;jdbctemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
&lt;/bean&gt;
配置dbcp或c3p0连接池：引入com.springsource.org.apache.commons.pool.jar 和引入dbcp.jar或c3p0jar包
&lt;!--配置DBCP连接池--&gt;
&lt;bean id=&quot;datasource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;
    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://192.168.2.224:3306/spring?serverTimezone=GMT&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;
&lt;!--配置C3P0连接池--&gt;
&lt;bean id=&quot;datasource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
    &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://192.168.2.224:3306/spring?serverTimezone=GMT&quot;/&gt;
    &lt;property name=&quot;user&quot; value=&quot;root&quot; /&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;
</code></pre><p>9.spring框架的事务管理相关类和API</p>
<pre><code>PlatFormTransactionMananger接口：平台事务管理器（真正管理事务的类），该接口有具体的实现类，根据不同的持久层框架，需要选择不同的实现类。
TransactionDefinition接口:事务定义信息（事务的隔离级别 ，传播行为，超时，只读）
TransactionStatus接口:事务的状态

上述对象之间的关系：平台事务管理器真正管理事务对象。根据事务定义的信息TransactionDefinition进行事务管理，在管理事务中产生一些状态，将状态记录到TransactionStatus中。

9.1.事务隔离级别的常量
    ISOLATION_DEFAULT 采用数据库的默认隔离级别
    ISOLATION_READ_UNCOMMITTED
    ISOLATION_READ_COMMITTED
    ISOLATION_REPEATABLE_READ
    ISOLATION_SERIALIZABLE

事务的传播行为常量（解决的是业务层之间的方法调用）
    *PROPAGATION_REQUIRED --A中有事务，使用A中的事务，如果没有，B就会开启一个新的事务，将A包含进来（保证A，B在同一个事务中），默认值
    PROPAGATION_SUPPORTS --A中有事务，使用A中的事务，如果A中没有事务，那么B也不使用事务
    PROPAGATION_MANDATORY --A中有事务，使用A中的事务，如果A没有事务，抛出异常
    *PROPAGATION_REQUIRES_NEW --A中有事务，将A中的事务挂起，B创建一个新的事务（保证AB没有在一个事务中）
    PROPAGATION_NOT_SUPPORTED --A中有事务，将A中的事务挂起
    PROPAGATION_NEVER --A中有事务，抛出异常
    PROPAGATION_NESTED --嵌套事务，当A执行之后,就会在这个位置设置一个保存点，如果B没有问题，执行通过。如果B出现异常， 根据需求回滚（选择回滚到保存点或者最初始状态）

9.2.spring事务分类:
    spring的编程式事务管理(不推荐),通过手动编写代码的方式完成事务的管理
    &lt;!--配置事务管理器--&gt;
    &lt;bean id=&quot;transactionManager&quot;                     class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
    &lt;/bean&gt;

    &lt;!--配置事务管理模板--&gt;
    &lt;bean id=&quot;transactionTemplate&quot; class=&quot;org.springframework.transaction.support.TransactionTemplate&quot;&gt;
        &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot;/&gt;
    &lt;/bean&gt;

    &lt;!--在需要进行事务管理的类中，注入事务管理的模板--&gt;
    &lt;bean id=&quot;accountService&quot; class=&quot;com.fuchen.coding.service.impl.AccountServiceImpl&quot;&gt;
        &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt;
        &lt;property name=&quot;transactionTemplate&quot; ref=&quot;transactionTemplate&quot;/&gt;
    &lt;/bean&gt;


    spring的声明式事务管理(底层采用AOP技术)，通过一段配置的方式完成事务的管理（掌握注解的方式）
    &lt;!--开启事务注解--&gt;
    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;
    在类上面添加@Transactional注解，表示当前这个类中的所有方法都有事务,也可以添加到方法上面，表示当前方法有事务
</code></pre><p>10.spring整合struts2,hibernate</p>
<pre><code>10.1.spring整合struts2框架两种方式
    1.action由struts2框架来创建，在action类中提供service属性和set方法，struts2框架会按名称自动注入。
    2.action由spring框架来创建，在spring配置文件中配置多例action，在struts2配置文件中class由全类名改为编写id值就ok,最后手动注入service。

10.2.spring整合hibernate第一种(带有hibernate.cfg.xml)，dao继承HibernateDaoSupport，在spring配置文件中配置：
&lt;!--编写bean，名称都是固定的，加载hibernate.cfg.xml的配置文件--&gt;
&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;
    &lt;property name=&quot;configLocation&quot; value=&quot;classpath:hibernate.cfg.xml&quot;/&gt;
&lt;/bean&gt;
在dao中注入sessionFactory
&lt;!--配置事务管理器--&gt;
&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;
    &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;/&gt;
&lt;/bean&gt;
在service增加事务注解：@Transactional

第二种(不带有hibernate.cfg.xml):在spring中增加配置
&lt;!--配置C3P0连接池--&gt;
&lt;bean id=&quot;datasource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
    &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://192.168.2.224:3306/ssh?serverTimezone=GMT&quot;/&gt;
    &lt;property name=&quot;user&quot; value=&quot;root&quot; /&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;

&lt;!--编写bean，名称都是固定的，加载hibernate.cfg.xml的配置文件--&gt;
&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;
    &lt;!--加载拦截池--&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
    &lt;!--配置可选--&gt;
    &lt;property name=&quot;hibernateProperties&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;
            &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;
            &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;
            &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
    &lt;!--配置映射文件--&gt;
    &lt;property name=&quot;mappingResources&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;com/fuchen/coding/domain/Customer.hbm.xml&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;

10.3.延时加载解决方案
    增加一个过滤器
    &lt;!--解决延时加载的问题--&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;OpenSessionInViewFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.orm.hibernate5.support.OpenSessionInViewFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;OpenSessionInViewFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
</code></pre>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/10/es6/" rel="next" title="es6">
                <i class="fa fa-chevron-left"></i> es6
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/22/mybatis/" rel="prev" title="mybatis">
                mybatis <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div id="gitalk-container"></div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">付晨</p>
              <p class="site-description motion-element" itemprop="description">一个程序猿的编程生活</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">付晨</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '723abd319492cb0babad',
          clientSecret: '8d22ca8cb4be5992f7596b0500724e36b8f0e8ae',
          repo: 'lzfuchen.github.io',
          owner: 'lzfuchen',
          admin: ['lzfuchen'],
          id: location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>

  





  

  

  

  
  

  

  

  

</body>
</html>
